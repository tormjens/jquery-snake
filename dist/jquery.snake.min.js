/*
 *  jquery-snake - v3.5.0
 *  A jQuery plugin for the Snake game.
 *  http://jqueryboilerplate.com
 *
 *  Made by Tor Morten Jensen
 *  Under MIT License
 */
function Point(a,b){this.x=a,this.y=b}function Controls(a){function b(b){q=!0;var c=b.touches[0].pageX-a.offsetLeft,e=b.touches[0].pageY-a.offsetTop;d(c,e)}function c(b){if(console.log(a),!q){var c=b.pageX-a.offsetLeft,e=b.pageY-a.offsetTop;return d(c,e)}}function d(a,b){e(a,b)?p.turnLeft():f(a,b)?p.turnRight():g(a,b)?p.turnUp():h(a,b)&&p.turnDown()}function e(a,b){return i(l,a,b)}function f(a,b){return i(m,a,b)}function g(a,b){return i(n,a,b)}function h(a,b){return i(o,a,b)}function i(a,b,c){var d=a.x<=b&&b<=a.x+j,e=a.y<=c&&c<=a.y+j;return d&&e}const j=50,k=5;var l,m,n,o,p=null;this.updateLocation=function(){l=new Point(a.width-150-15,a.height-j-k),o=new Point(a.width-100-10,a.height-j-k),m=new Point(a.width-j-k,a.height-j-k),n=new Point(a.width-100-10,a.height-100-10)},this.updateLocation(),this.register=function(a){p=a},this.listen=function(){$(a).on("touchstart",b),$(a).on("click",c)};var q=!1;this.draw=function(a){a.fillStyle="rgba(0, 0, 0, 0.1)",a.fillRect(l.x,l.y,j,j),a.fillRect(m.x,m.y,j,j),a.fillRect(n.x,n.y,j,j),a.fillRect(o.x,o.y,j,j)}}function ResetButton(a,b){function c(c){var e=c.pageX-a.offsetLeft,f=c.pageY-a.offsetTop,g=d.x<=e&&e<=d.x+d.width,h=d.y<=f&&f<=d.y+d.height;g&&h&&b.reset()}this.x=10,this.y=a.height-50,this.width=100,this.height=40;var d=this;this.updateLocation=function(){this.y=a.height-50},this.listen=function(){$(a).on("click",c)},this.draw=function(){}}function Score(a,b){this.score=0,this.reset=function(){this.score=0},this.increment=function(){this.score++},this.draw=function(a){a.font="bold 36px sans-serif",a.textAlign="left",a.textBaseline="top",a.fillStyle=b.scoreColor,a.fillText(b.labels.score+": "+this.score,10,10)}}function Snake(a,b){this.points=[new Point(BLOCK_SIZE,BLOCK_SIZE)],this.direction=Direction.RIGHT;var c=this;this.reset=function(){this.points=[new Point(50,50)],this.direction=Direction.RIGHT},this.headCollidesWithWall=function(a){var b=this.points[0],c=0>b.x||b.x>a.width-BLOCK_SIZE,d=0>b.y||b.y>a.height-BLOCK_SIZE;return c||d},this.headCollidesWithSelf=function(){var a=this.points[0];for(i=1;i<this.points.length;i++)if(a.x===this.points[i].x&&a.y===this.points[i].y)return!0;return!1},this.headCollidesWithApple=function(a){var b=this.points[0];return b.x===a.x&&b.y===a.y},this.turnLeft=function(){(1===c.points.length||c.points[1].x===c.points[0].x)&&(c.direction=Direction.LEFT)},this.turnRight=function(){(1===c.points.length||c.points[1].x===c.points[0].x)&&(c.direction=Direction.RIGHT)},this.turnUp=function(){(1===c.points.length||c.points[1].y===c.points[0].y)&&(c.direction=Direction.UP)},this.turnDown=function(){(1===c.points.length||c.points[1].y===c.points[0].y)&&(c.direction=Direction.DOWN)};var d={37:this.turnLeft,38:this.turnUp,39:this.turnRight,40:this.turnDown};this.listenForKeyPress=function(a){$(document).on("keydown",$(a),function(a){var b=a.keyCode;b>=37&&40>=b&&(a.preventDefault(),d[b]())})},this.draw=function(a){for(i=0;i<this.points.length;i++)a.fillStyle=0===i?b.snakeHeadColor:b.snakeTailColor,a.fillRect(this.points[i].x,this.points[i].y,BLOCK_SIZE,BLOCK_SIZE)}}function Apple(a,b){function c(){var b=Math.random()*(a.width-BLOCK_SIZE);return Math.round(b/BLOCK_SIZE)*BLOCK_SIZE}function d(){var b=Math.random()*(a.height-BLOCK_SIZE);return Math.round(b/BLOCK_SIZE)*BLOCK_SIZE}this.x=c(),this.y=d(),this.move=function(){this.x=c(),this.y=d()},this.draw=function(a){a.fillStyle=b.appleColor,a.fillRect(this.x,this.y,BLOCK_SIZE,BLOCK_SIZE)}}function SnakeGame(a,b){function c(){var b=Date.now();if(b-l>50){if(l=b,e.headCollidesWithApple(f)){var c=e.points[e.points.length-1];e.points.push(new Point(c.x,c.y)),h.increment(),jQuery(a).trigger("snake.game.score.update",[h.score]),f.move()}for(i=e.points.length-1;i>0;i--)e.points[i].x=e.points[i-1].x,e.points[i].y=e.points[i-1].y;e.direction===Direction.LEFT?e.points[0].x-=BLOCK_SIZE:e.direction===Direction.RIGHT?e.points[0].x+=BLOCK_SIZE:e.direction===Direction.UP?e.points[0].y-=BLOCK_SIZE:e.points[0].y+=BLOCK_SIZE,(e.headCollidesWithWall(a)||e.headCollidesWithSelf())&&(jQuery(a).trigger("snake.game.collide",[h.score]),m=!0)}}function d(){k.clearRect(0,0,a.width,a.height),e.draw(k),f.draw(k),h.draw(k),g.draw(k),null!==j&&j.draw(k),jQuery(a).trigger("snake.game.ready",[n])}var e=new Snake(a,b),f=new Apple(a,b),g=new ResetButton(a,this),h=new Score(a,b),j=null,k=a.getContext("2d"),l=Date.now(),m=!1,n=this;this.moveApple=function(){f.move()},this.resize=function(){var b=f.x>a.width-BLOCK_SIZE,c=f.y>a.height-BLOCK_SIZE;(b||c)&&f.move(),g.updateLocation(),null!==j&&j.updateLocation(),jQuery(a).trigger("snake.game.resize",[n]),d()},this.reset=function(){jQuery(a).trigger("snake.game.reset",[n]),m=!1,l=Date.now(),e.reset(),f.move(),h.reset()},this.pause=function(){m=!0},this["continue"]=function(){m=!1},this.enableControls=function(){j=new Controls(a),j.register(e),jQuery(a).trigger("snake.game.enable.controls",[n])},this.play=function(){function b(){m||(c(),d())}if(g.listen(),e.listenForKeyPress(a),null!==j&&j.listen(),jQuery(a).trigger("snake.game.play",[n,m]),null!==window.requestAnimationFrame){var f=function(){b(),window.requestAnimationFrame(f)};window.requestAnimationFrame(f)}else setInterval(b,1e3/60)}}const BLOCK_SIZE=10;var Direction={LEFT:0,RIGHT:1,UP:2,DOWN:3};!function(a,b){"use strict";function c(b,c){this.element=b,this.$element=a(b),this.settings=a.extend({},e,c),this._defaults=e,this._name=d,this.init()}var d="snake",e={snakeHeadColor:"rgb(0,0,0)",snakeTailColor:"rgb(115,115,115)",appleColor:"rgb(255,0,0)",scoreColor:"rgb(200,200,200)",responsive:!0,ratio:"16:9",labels:{score:"Score",reset:"Reset"}};a.extend(c.prototype,{init:function(){this.game=new SnakeGame(this.element,this.settings),this.settings.responsive&&(this.resize(),a(b).on("resize",this.resize)),this.listen()},listen:function(){var c=this;this.$element.on("snake.play",function(){c.game.play()}),this.$element.on("snake.reset",function(){c.game.reset()}),this.$element.on("snake.pause",function(){c.game.pause()}),this.$element.on("snake.continue",function(){c.game["continue"]()}),this.$element.on("snake.resize",function(){c.game.resize()}),this.$element.on("snake.move.apple",function(){c.game.moveApple()}),a(b).focus(function(){c.game["continue"]()}),a(b).blur(function(){c.game.pause()})},resize:function(){var a=this.settings.ratio.split(":"),b=this.$element.parent().width(),c=b*a[1]/a[0];this.element.style.width=b+"px",this.element.style.height=c+"px",this.element.width=b,this.element.height=c,this.game.resize()}}),a.fn[d]=function(b){return this.each(function(){a.data(this,"plugin_"+d)||a.data(this,"plugin_"+d,new c(this,b))})}}(jQuery,window,document);